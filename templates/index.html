{% extends "layout.html" %}

{% block content %}
<div class="cards-grid">
    <!-- Card 1: Kendala Open -->
    <div class="card-single card-red">
        <div>
            <h1>{{ stats.open_issues }}</h1>
            <span>Kendala Alat (Open)</span>
        </div>
        <div>
            <i class="fa-solid fa-screwdriver-wrench"></i>
        </div>
        <div class="card-footer">
            <a href="{{ url_for('kendala') }}">More info <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </div>

    <!-- Card 2: Support Ticket -->
    <div class="card-single card-purple">
        <div>
            <h1>{{ stats.support_open }}</h1>
            <span>Tiket Support IT</span>
        </div>
        <div>
            <i class="fa-solid fa-laptop-medical"></i>
        </div>
        <div class="card-footer">
            <a href="{{ url_for('support') }}">More info <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </div>

    <!-- Card 3: Maintenance Month -->
    <div class="card-single card-blue">
        <div>
            <h1>{{ stats.maint_month }}</h1>
            <span>Sesi Maintenance (Bulan Ini)</span>
        </div>
        <div>
            <i class="fa-solid fa-calendar-check"></i>
        </div>
        <div class="card-footer">
            <a href="#">Data Bulan Ini <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </div>

    <!-- Card 4: Logbook Status -->
    <div class="card-single {{ 'card-green' if stats.logbook_filled else 'card-orange' }}">
        <div>
            <h1>{{ 'OK' if stats.logbook_filled else '!' }}</h1>
            <span>{{ 'Logbook Terisi' if stats.logbook_filled else 'Logbook Belum Diisi' }}</span>
        </div>
        <div>
            <i class="fa-solid fa-clipboard-list"></i>
        </div>
        <div class="card-footer">
            <a href="{{ url_for('logbook') }}">Cek Logbook <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </div>
</div>

<div class="recent-grid">
    <div class="card">
        <div class="card-header">
            <h3>Jadwal Pemeliharaan Rutin (Desember)</h3>
            <a href="{{ url_for('upload_schedule') }}" class="btn-see-all"><i class="fa-solid fa-upload"></i> Update Jadwal (Excel)</a>
        </div>
        <div class="card-body">
            <div class="table-responsive schedule-container">
                {% if schedule_html %}
                    {{ schedule_html | safe }}
                {% else %}
                    <div style="text-align: center; padding: 40px; color: #777;">
                        <i class="fa-solid fa-calendar-xmark" style="font-size: 3rem; margin-bottom: 10px;"></i>
                        <p>Belum ada jadwal yang diupload untuk bulan ini.</p>
                        <a href="{{ url_for('upload_schedule') }}" class="button" style="margin-top:10px;">Upload File Excel</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}